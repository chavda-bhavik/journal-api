var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,o=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))l.call(t,a)&&s(e,a,t[a]);return e},i=(e,n)=>t(e,a(n));import{v as c,c as m,a as d,p as u,b as g,g as p,d as f,l as h,F as x,R as b,P as E,e as y,f as v,h as w,u as k,i as N,j,k as C,m as S,n as $,o as D,r as T,C as L,D as J,q as M,s as R,t as O,T as I,S as K,w as B,x as H,y as A,z as P,A as _,B as q,E as z,G as U,H as Y,I as F,J as W,K as G,L as Q,M as V,N as X,O as Z,Q as ee,U as te,V as ae,W as ne,X as re,Y as le}from"./vendor.f72e28e3.js";const se=m({name:"journal",initialState:{loading:!1,errorMessage:"",journals:[],formattedJournals:[],todaysJournal:void 0,journal:void 0,groupedJournals:{},stats:{months:0,weeks:0,total:0},searched:!1,fetched:!1},reducers:{loading:e=>{e.loading=!0},journals:(e,t)=>{e.loading=!1,e.journals=t.payload.journals,e.formattedJournals=t.payload.formattedJournals,e.todaysJournal=t.payload.todaysJournal,e.groupedJournals=t.payload.groupedJournals,e.stats=t.payload.stats,t.payload.fetched&&(e.fetched=t.payload.fetched)},journal:(e,t)=>{e.journal=t.payload.journal,e.loading=!1},resetJournal:e=>{e.journal=void 0},error:(e,t)=>{e.loading=!1,e.errorMessage=t.payload},search:(e,t)=>{e.formattedJournals=t.payload.formattedJournals,e.groupedJournals=t.payload.groupedJournals,e.searched=t.payload.searched}}}),{loading:oe,error:ie,journals:ce,journal:me,resetJournal:de,search:ue}=se.actions;const ge=g({reducer:u({key:"root",version:1,storage:h,whitelist:["journal"]},d({journal:se.reducer})),middleware:p({serializableCheck:{ignoredActions:[x,b,E,y,v,w]}})}),pe=f(ge),fe=()=>k(),he=N,xe={1:"greatfullness",2:"actions",3:"affirmation",4:"highlights",5:"improvements"},be=e=>e.replace(/<li>/gi,"").replace(/<\/li>/g,"\n").split("\n")[0].replace(/&nbsp;/,""),Ee=(e,t)=>{const a={title:"",text:""},n={affirmation:"your daily affirmation",greatfullness:"what i was greateful for",highlights:"Highlights of the day"};return t&&e[t]?(a.title=n[t],a.text=e[t]):e.affirmation?(a.title=n.affirmation,a.text=e.affirmation):e.greatfullness?(a.title=n.greatfullness,a.text=e.greatfullness):e.highlights&&(a.title=n.highlights,a.text=e.highlights),a.text=be(a.text),a},ye=e=>{const t=[];let a;return null==e||e.forEach(((e,n)=>{a=new Date(Number(e.date)),a.setHours(0,0,0,0),n%3==0?t.push(o({id:e.id,date:a.getTime().toString(),status:e.status,image:e.image},Ee(e,"affirmation"))):t.push(o({id:e.id,status:e.status,date:a.getTime().toString(),image:e.image},Ee(e,"greatfullness")))})),t},ve=e=>{let t="",a=e.reduce(((e,a)=>(t=j(Number(a.date)).format("MMMM YYYY"),e.set(t,[...e.get(t)||[],a]),e)),new Map);return Object.fromEntries(a)},we=(e,t)=>5===e&&"complete"===t||(3===e&&"morning"===t||5===e&&"evening"===t);let ke="http://localhost:4000/graphql";ke="https://journal-clone.herokuapp.com/graphql";const Ne=new S.GraphQLClient("https://journal-clone.herokuapp.com/graphql"),je=S.gql`
    query Journals($date: DateTime) {
        getAllJournals(monthDate: $date) {
            id
            actions
            greatfullness
            date
            affirmation
            highlights
            improvements
            status
            image
        }
    }
`,Ce=S.gql`
    query GetJournal($id: String, $date: DateTime) {
        journal(id: $id, date: $date) {
            id
            actions
            greatfullness
            affirmation
            highlights
            improvements
            date
            status
            image
        }
    }
`,Se=S.gql`
    mutation Journal(
        $id: String!
        $date: DateTime!
        $actions: String
        $greatfullness: String
        $affirmation: String
        $highlights: String
        $improvements: String
        $status: Int!
        $image: Upload
    ) {
        journal(
            values: {
                id: $id
                date: $date
                actions: $actions
                greatfullness: $greatfullness
                affirmation: $affirmation
                highlights: $highlights
                improvements: $improvements
                status: $status
                image: $image
            }
        ) {
            id
            actions
            greatfullness
            affirmation
            highlights
            improvements
            date
            status
            image
        }
    }
`,$e=S.gql`
    mutation DeleteJournal($id: String, $date: DateTime) {
        deleteJournal(id: $id, date: $date) {
            id
            actions
            greatfullness
            affirmation
            highlights
            improvements
            date
            status
            image
        }
    }
`,De=(e,t,a)=>async n=>{try{let r;if(n(oe()),a)r=t.find((t=>t.id===e)),r&&n(me({journal:r}));else{let t=await Ne.request(Ce,{id:e});n(me(t.journal))}}catch(r){n(ie(r.message))}},Te=(e,t,a)=>{let n=ye(e),r=(e=>{if(j.extend(C),e){let t=e.find((e=>j(Number(e.date)).isToday()));if(t){const e=Ee(t),a=be(e.text);return{id:t.id,date:t.date,text:a,title:e.title,status:t.status}}}})(e),l=ve(n);t(ce({journals:e,formattedJournals:n,groupedJournals:l,stats:{months:Object.keys(l).length,total:n.length,weeks:10},todaysJournal:r,fetched:a}))},Le=({icon:e,disabled:t=!1,onClick:a=(()=>{}),className:n="",active:r=!1,size:l="lg",variant:s="white",shadow:o="lg",type:i="button"})=>{let c="inline-block focus:outline-none rounded-full px-3 py-2 border-2";return c+=r?" bg-gold-base":"narvik"===s?" bg-narvik-base":"brown"===s?" bg-brown-light text-black":" bg-white","md"===o?c+=" shadow-mg":"lg"===o&&(c+=" shadow-lg"),t&&(c+=" text-narvik-medium"),c+=" "+n,$.createElement("button",{type:i,className:c,disabled:t,onClick:a},$.createElement(D,{icon:e,size:l}))},Je=({show:e,onClose:t,children:a,bottomCenter:n=!0})=>{T.exports.useEffect((()=>{r(e)}),[e]);const r=e=>{let t=document.getElementsByTagName("body")[0];e?t.classList.add("overflow-hidden"):t.classList.remove("overflow-hidden")};return $.createElement(L,{in:e,timeout:{appear:200,exit:200,enter:100},classNames:"blur",unmountOnExit:!0},$.createElement("div",{className:"fixed pin h-full z-10 inset-0 overflow-hidden","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},$.createElement("div",{className:`flex ${n?"items-end xs:items-center":"items-center"} justify-center min-h-screen h-full`},$.createElement(Le,{icon:["fas","times"],className:"z-30 absolute top-4 right-4",variant:"narvik",onClick:t}),$.createElement("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t}),$.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹"),$.createElement("div",{className:"transform transition-all z-20 w-auto"},$.createElement(L,{in:e,timeout:{appear:200,enter:200,exit:200},classNames:"pop-up",unmountOnExit:!0},a)))))};const Me=J.__esModule?J.default:J,Re=({selectedDay:e,setSelectedDay:t})=>$.createElement($.Fragment,null,$.createElement("style",null,"\n.DayPicker {\n    width: 100%;\n}\n.DayPicker-Weekday {\n\tfont-size: 1.2em !important;\n\tpadding: 0.64em !important;\n}\n.DayPicker-Day--today:not(.DayPicker-Day--outside) {\n\tcolor: white;\n    background-color: #fbc740;\n}\n.DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside):hover {\n    background-color: #B6AE9F;\n    color: white;\n}\n"),$.createElement(Me,{disabledDays:{after:new Date},selectedDays:e,onDayClick:e=>t(e)})),Oe=({onClose:e=(()=>{}),journalsDates:t,journals:a,todaysJournal:n,show:r=!1})=>{const[,l]=M(),[s,c]=T.exports.useState(),[m,d]=T.exports.useState({primaryButtonText:"Create Todays Entry",primaryButtonLink:"/journal?phase=morning",secondaryButtonText:"Complete evening entry",secondaryButtonLink:""});T.exports.useEffect((()=>{const e=o({},m);n?(e.primaryButtonText="Go To Record",e.primaryButtonLink=`/view/${n.id}`,e.secondaryButtonLink=`/journal?phase=evening&rid=${n.id}&page=4`):e.secondaryButtonLink="",d(e)}),[n]);const u=e=>{e&&l(e)};return $.createElement(Je,{show:r,onClose:e},$.createElement("div",{className:"bg-white rounded-t-md xs:rounded-md text-left w-full sm:w-min"},$.createElement(Re,{selectedDay:s,setSelectedDay:e=>{let n;if(e.setHours(0,0,0,0),t.includes(e.getTime())){const t=a.find((t=>(n=new Date(Number(t.date)),n.setHours(0,0,0,0),n.getTime()===e.getTime())));d(i(o({},m),{primaryButtonText:"Go To Record",primaryButtonLink:`/view/${t.id}`}))}else d(i(o({},m),{primaryButtonText:"New for this date",primaryButtonLink:`/journal?phase=complete&date=${e.getTime()}`}));c(e)}}),$.createElement("div",{className:"bg-gray-50 px-4 xs:pb-3 pb-6 w-full"},$.createElement("button",{type:"button",className:"block w-full rounded-md shadow border border-transparent bg-gold-base px-4 py-2 text-base font-medium text-brown-dark focus:outline-none",onClick:()=>u(m.primaryButtonLink)},m.primaryButtonText),$.createElement("button",{type:"button",className:"mt-3 w-full rounded-md shadow border border-transparent bg-gray-200 px-4 py-2 text-base font-medium text-brown-dark focus:outline-none",onClick:()=>u(m.secondaryButtonLink)},m.secondaryButtonText))))},Ie=({count:e,text:t})=>$.createElement("div",{className:"flex-1 px-2"},$.createElement("h3",{className:"text-brown-dark text-2xl md:text-3xl font-medium"},e),$.createElement("p",{className:"text-brown-light text-base md:text-xl font-medium leading-4"},t)),Ke=({stats:e})=>$.createElement("div",{className:"rounded-md bg-white flex flex-row mx-3 my-3 shadow py-3 text-center divide-x divide-brown-light"},$.createElement(Ie,{text:"Total Entries",count:e.total}),$.createElement(Ie,{text:"Months Journaling",count:e.months}),$.createElement(Ie,{text:"Weeks Journaling",count:e.weeks}));function Be(e){if(!e||0===Object.keys(e).length)throw new Error("No object parameter found use: {userKeys: ... } ");const t=e.userKeys||null,a=e.order||!1,n=e.ref||window,[r,l]=T.exports.useState(!1),[s,o]=T.exports.useState([]),i=T.exports.useRef(""),c={type:null,objRef:n,downHandler:void 0,upHandler:void 0,useEffect:null,output:null},m=({key:e})=>{i.current!==t&&e===t&&(l(!0),i.current=e)},d=({key:e})=>{e===t&&(l(!1),i.current="")},u=({key:e,repeat:t})=>{t||o((t=>[...t,e]))},g=({key:e})=>{o((e=>[...e])),o((t=>[...t.filter((t=>t!==e))]))},p=(e=[],t=[])=>{const n=[...e],r=n.filter((e=>!t.some((t=>t===e)))),l=n.length===t.length&&n.every(((e,a)=>e===t[a]));let s;return s=a?l:0===r.length,s};function f(){T.exports.useEffect((()=>{const e=n.current?n.current:n;return e.addEventListener("keydown",c.downHandler),e.addEventListener("keyup",c.upHandler),()=>{e.removeEventListener("keydown",c.downHandler),e.removeEventListener("keyup",c.upHandler)}}),[])}return(e=>{if(!t)throw new Error("Invalid 'userKeys' property: must be {userKeys:'KEY'} or {userKeys:[KEY, ...]}");if("string"==typeof t&&(e.output=r,e.downHandler=m,e.upHandler=d,e.useEffect=f,e.type="STRING"),Array.isArray(t)&&(e.output=p(t,s),e.downHandler=u,e.upHandler=g,e.useEffect=f,e.type="ARRAY"),Number.isInteger(t))throw new Error("Invalid 'userKeys' property: must be {userKeys:'KEY'} or {userKeys:[KEY, ...]}")})(c),c.useEffect(),c.output}const He=()=>{const[e,t]=T.exports.useState(!1),a=he((e=>e.journal.journals)),n=fe(),[,r]=R(),l=$.useRef(),s=Be({userKeys:["s"]});let o=Be({userKeys:["Escape"]});T.exports.useEffect((()=>{s&&!e&&t(!0),o&&e&&c()}),[s,e,o]),T.exports.useEffect((()=>{e&&l.current.focus()}),[e]);const i=e=>{e&&e.preventDefault();const t=l.current.value;t&&n(((e,t)=>a=>{let n=t.filter((t=>{var a,n,r,l,s;return(null==(a=t.actions)?void 0:a.includes(e))||(null==(n=t.affirmation)?void 0:n.includes(e))||(null==(r=t.greatfullness)?void 0:r.includes(e))||(null==(l=t.highlights)?void 0:l.includes(e))||(null==(s=t.improvements)?void 0:s.includes(e))})),r=ye(n),l=ve(r);a(ue({formattedJournals:r,groupedJournals:l,searched:!0}))})(t,a))},c=()=>{n((e=>t=>{let a=ye(e),n=ve(a);t(ue({formattedJournals:a,groupedJournals:n,searched:!1}))})(a)),t(!1)},m=$.createElement("div",{className:"flex justify-between items-center md:py-2"},$.createElement("div",{className:"flex-initial items-center cursor-not-allowed"},$.createElement("img",{src:"/assets/journal-icon.294d736c.png",className:"w-11 rounded-md lg:w-12"})),$.createElement("div",{className:"flex-initial gap-2 sm:gap-3 md:gap-4 flex items-center cursor-pointer"},$.createElement(Le,{icon:["fas","grip-horizontal"],size:"lg",onClick:()=>{r("/gallary")},shadow:"none",variant:"white"}),$.createElement(Le,{icon:["fas","search"],size:"lg",onClick:()=>t(!0),shadow:"none",variant:"white"}))),d=$.createElement("form",{className:"flex flex-row items-center md:py-1",onSubmit:i},$.createElement(Le,{icon:["fas","times"],size:"lg",onClick:c,shadow:"none",type:"button",variant:"brown"}),$.createElement("input",{ref:l,type:"text",name:"search",className:"w-full bg-narvik-light border-b-2 border-gold-base mx-2 px-1 pt-1 focus:outline-none text-xl"}),$.createElement(Le,{icon:["fas","search"],size:"lg",type:"submit",className:"ml-1",active:!0,onClick:i,shadow:"none",variant:"brown"}));return $.createElement("div",{className:"mt-1 h-12 md:h-16"},e?d:m)},Ae=({text:e,onClick:t=(()=>{}),active:a=!1,danger:n=!1,className:r="",children:l})=>{let s="focus:outline-none rounded-md px-3 py-1 outline-none "+r;return s+=a?" bg-gold-base":n?" bg-red-500":" bg-narvik-base",$.createElement("button",{className:s,onClick:t},e||l)},Pe={0:"SUN",1:"MON",2:"TUE",3:"WED",4:"THU",5:"FRI",6:"SAT"},_e=({hasConnector:e=!1,onClick:t=(()=>{}),journal:a})=>{let n=null;return a.image&&("string"==typeof a.image?n=$.createElement("img",{src:`data:image/png;base64,${a.image}`,alt:"journal image",className:"rounded-xl object-cover object-center max-h-52 w-full border-2"}):a.image.name&&(n=$.createElement("img",{src:URL.createObjectURL(a.image),alt:"journal image",className:"rounded-xl object-cover object-center max-h-52 w-full border-2"}))),$.createElement("div",{className:"flex gap-4 justify-between my-1 cursor-pointer",onClick:()=>t(a)},$.createElement("div",{className:"flex flex-col w-10 md:w-11"},$.createElement("div",{className:"rounded-md text-center px-1 bg-narvik-medium"},$.createElement("span",{className:"uppercase text-xs md:text-sm text-brown-light font-medium"},Pe[j(Number(a.date)).get("day")]),$.createElement("h3",{className:"text-brown-dark text-lg md:text-xl -mt-1.5 font-medium"},j(Number(a.date)).date())),e?$.createElement("div",{className:"w-0 h-full mx-auto mt-1 border-l border-brown-light"}):null),$.createElement("div",{className:"flex-auto pb-4"},$.createElement("p",{className:"uppercase text-brown-light text-sm font-normal lg:font-medium"},a.title),$.createElement("p",{className:"text-brown-dark break-all text-lg sm:text-xl md:text-2xl font-normal"},a.text),n))},qe=({title:e,className:t})=>$.createElement("h3",{className:`text-brown-dark font-medium text-2xl sm:text-3xl my-2 md:my-3 ${t}`},e),ze=({onCreateMorningEntry:e})=>$.createElement("div",{className:"w-100 bg-narvik-base text-center pt-3 pb-4 my-2 rounded-lg"},$.createElement("p",{className:"text-narvik-dark mt-3"},j().format("dddd, MMMM D")),$.createElement("h3",{className:"font-highlights text-narvik-dark mt-4 leading-7 text-xl md:text-2xl font-medium"},"Smile. Let's make",$.createElement("br",null),"today a great day,",$.createElement("br",null),"Bhavik!"),$.createElement(Ae,{text:"Start Today's Journal",className:"mt-5 text-lg md:text-xl",active:!0,onClick:e})),Ue=({todaysJournal:e})=>{const[,t]=R(),a=()=>{t("/journal?phase=evening&page=4")},n=e=>{t(`/view/${e.id}`)};let r=$.createElement(ze,{onCreateMorningEntry:()=>{t("/journal?phase=morning")}});return e&&(r=$.createElement($.Fragment,null,$.createElement("div",{className:"flex flex-row justify-between items-center"},$.createElement(qe,{title:"Today"}),2!==e.status&&$.createElement(Ae,{active:!0,className:"max-h-10",onClick:a},"Complete"," ",$.createElement(D,{icon:["fas","chevron-right"],className:"text-sm"}))),$.createElement(_e,{journal:e,onClick:n}))),r},Ye=({quote:e,author:t})=>{const[a,n]=T.exports.useState(!0);return a?$.createElement("div",{className:"rounded-lg bg-narvik-base p-3 mx-3 relative"},$.createElement("p",{className:"font-highlights text-brown-dark text-xl md:text-2xl max-w-9/10 mb-1"},e),$.createElement("p",{className:"uppercase text-brown-light text-sm font-medium"},t),$.createElement(D,{icon:["fas","times"],size:"1x",className:"absolute right-4 top-3",onClick:()=>n(!1)})):null},Fe=({journals:e})=>{const[,t]=R(),a=e=>{t(`/view/${e.id}`)};return $.createElement("div",{className:"px-3"},Object.keys(e).reduce(((t,n)=>(t.push($.createElement(qe,{title:n,key:n})),e[n].forEach(((r,l)=>{t.push($.createElement(_e,{journal:r,hasConnector:l!==e[n].length-1,key:r.id,onClick:a}))})),t)),[]))},We=({children:e})=>$.createElement("div",{className:"sticky bottom-0 bg-narvik-base w-full p-2 shadow-2xl border-t-2 border-narvik-medium rounded-t-md"},e),Ge=({})=>{const e=he((e=>e.journal)),[t,a]=T.exports.useState(!1),n=fe();let r=Be({userKeys:["n"]}),l=Be({userKeys:["Escape"]});T.exports.useEffect((()=>{r&&!t&&s(!0),l&&t&&s(!1)}),[r,t,l]),T.exports.useEffect((()=>{window.navigator.onLine&&n((async e=>{try{e(oe());let t=await Ne.request(je);Te(t.getAllJournals,e,!0)}catch(t){e(ie(t.message))}}))}),[window.navigator.onLine]);const s=e=>{a(e)};return $.createElement("div",{className:"container space-y-3 relative"},$.createElement("div",{className:" py-2 px-3"},$.createElement(He,null),$.createElement(L,{in:!e.searched,timeout:500,classNames:"blur",unmountOnExit:!0},$.createElement(Ue,{todaysJournal:e.todaysJournal}))),$.createElement(L,{in:!e.searched,timeout:500,classNames:"blur",unmountOnExit:!0},$.createElement($.Fragment,null,$.createElement(Ke,{stats:e.stats}),$.createElement(Ye,{author:"Bhavik Chavda",quote:"Watever we give, we receive."}))),$.createElement(Fe,{journals:e.groupedJournals}),!0!==e.searched&&$.createElement(We,null,$.createElement(Ae,{active:!0,className:"w-full font-normal text-base",onClick:()=>s(!0)},$.createElement(D,{icon:["fas","plus"]})," Add Journal")),$.createElement(Oe,{journals:e.formattedJournals,journalsDates:e.formattedJournals.map((e=>Number(e.date))),todaysJournal:e.todaysJournal,show:t,onClose:()=>s(!1)}))};var Qe="_List_dea9e_1";const Ve=({title:e,text:t,className:a="",isList:n=!0,editing:r=!1,onClick:l=(()=>{})})=>{const s=$.createElement("ol",{className:`pl-3 ${Qe}`,dangerouslySetInnerHTML:{__html:t||""}}),o=$.createElement("p",{dangerouslySetInnerHTML:{__html:t||""}});return $.createElement(L,{in:!0,timeout:{appear:200,exit:200,enter:100},classNames:"blur"},$.createElement("div",{className:`px-2 md:px-3 py-2 md:py-3 ${r?"rounded-xl bg-white":""} ${a} break-all`,onClick:()=>r&&l(),role:"button",onKeyDown:()=>r&&l(),tabIndex:-1},$.createElement("p",{className:(r?"text-gold-base":"text-narvik-medium")+" uppercase font-medium mb-1"},e),n?s:o))},Xe=({show:e,imageSrc:t,onClose:a,children:n})=>$.createElement(Je,{show:e,onClose:a,bottomCenter:!1},$.createElement("div",{className:"flex flex-col max-w-3xl max-h-screen overflow-auto"},$.createElement("div",{className:"px-2 py-4"},$.createElement("img",{src:t,alt:"journal image",className:"rounded-xl border-2 border-narvik-medium object-contain h-1/2-screen"})),n)),Ze=e=>{var t;const[,a]=R(),[n,r]=T.exports.useState(!1),[l,s]=T.exports.useState(!1),{journals:o,journal:i,fetched:c}=he((e=>e.journal)),m=fe(),d=Be({userKeys:["e"]});let u=Be({userKeys:["Escape"]}),g=Be({userKeys:["Delete"]});T.exports.useEffect((()=>{!n&&d&&r(!0),u&&h(),g&&f()}),[d,n,u,g]),T.exports.useEffect((()=>{m(De(e.params.id,o,c))}),[]);const p=t=>{a(`/journal?page=${t}&rid=${e.params.id}`)},f=async()=>{m(((e,t)=>async a=>{try{a(oe()),await Ne.request($e,{id:e});let n=t.filter((t=>t.id!==e));Te(n,a)}catch(r){a(ie(r.message))}let n=t.filter((t=>t.id!==e));Te(n,a)})(e.params.id,o)),a("/")},h=()=>{a("/")};let x=null;n||(x=$.createElement(We,null,$.createElement(Ae,{className:"w-full font-normal text-base text-white",danger:!0,onClick:f},$.createElement(D,{icon:["fas","trash-alt"]})," Delete Journal")));let b=null;(null==i?void 0:i.image)&&("string"==typeof i.image?b=$.createElement("img",{src:`data:image/png;base64,${i.image}`,alt:"journal image",className:"rounded-xl object-cover object-center max-h-80 md:max-h-96 w-full border-2"}):i.image.name&&(b=$.createElement("img",{src:URL.createObjectURL(i.image),alt:"journal image",className:"rounded-xl object-cover object-center max-h-80 md:max-h-96 w-full border-2"})));let E="";return i&&("string"==typeof i.image?E=`data:image/png;base64,${i.image}`:(null==(t=i.image)?void 0:t.name)&&(E=URL.createObjectURL(i.image))),$.createElement("div",{className:"container"},$.createElement("div",{className:"flex flex-row py-3 justify-between items-center px-3"},$.createElement(Ae,{onClick:h,className:"border-2"},$.createElement(D,{icon:["fas","arrow-left"]})),$.createElement("span",{className:"text-lg"}),$.createElement(Ae,{text:n?"Done":"Edit",onClick:()=>r(!n),active:n,className:"border-2"})),(null==i?void 0:i.image)&&b&&$.createElement("div",{className:"mx-3",onClick:()=>s(!0)},b),$.createElement("div",{className:"px-3 pb-5"},$.createElement(D,{icon:["fas","sun"],className:"mt-4 mb-2",size:"lg"}),$.createElement(Ve,{className:"mt-3",editing:n,title:"3 things I am greateful for...",text:null==i?void 0:i.greatfullness,onClick:()=>p(1)}),$.createElement(Ve,{className:"mt-7",editing:n,title:"WHAT WILL I DO TO MAKE TODAY GREAT?",text:null==i?void 0:i.actions,onClick:()=>p(2)}),$.createElement(Ve,{className:"mt-7",editing:n,title:"DAILY AFFIRMATION",text:null==i?void 0:i.affirmation,isList:!1,onClick:()=>p(3)})),$.createElement("div",{className:"px-3 pb-5 bg-narvik-base"},$.createElement(D,{icon:["fas","moon"],className:"mt-4 mb-2",size:"lg"}),$.createElement(Ve,{className:"mt-3",editing:n,title:"Highlights of the day",text:null==i?void 0:i.highlights,onClick:()=>p(4)}),$.createElement(Ve,{className:"mt-7",editing:n,title:"Things that can be improved",text:null==i?void 0:i.improvements,isList:!1,onClick:()=>p(5)})),l&&E&&$.createElement(Xe,{show:l,imageSrc:E,onClose:()=>s(!1)}),x)},et=({stage:e,changeStage:t,close:a,progressPercentage:n,backButtonDisabled:r=!1})=>$.createElement("div",{className:"flex flex-row py-3 justify-between items-center px-3"},e>0&&$.createElement(Le,{icon:["fas","arrow-left"],variant:"narvik",shadow:"none",onClick:()=>t(e-1),disabled:r}),$.createElement("div",{className:"w-full mx-2 bg-narvik-base"},$.createElement("div",{className:"bg-brown-light h-2 rounded-lg",style:{width:n+"%"}})),$.createElement(Le,{icon:["fas","times"],variant:"narvik",onClick:a,shadow:"none"}));var tt="_List_1e6xc_1";const at=({listText:e,paraText:t,className:a="",title:n,isList:r,listRef:l,paraRef:s})=>{const o=()=>{var e,t;r?null==(e=l.current)||e.focus():null==(t=s.current)||t.focus()};T.exports.useEffect(o,[]);const i=$.createElement("p",{className:"focus:outline-none",contentEditable:!0,ref:s,dangerouslySetInnerHTML:{__html:t}}),c=$.createElement("ol",{onInput:()=>{var e;l.current&&!(null==(e=l.current)?void 0:e.innerHTML)&&(l.current.innerHTML="<li>&nbsp;</li>")},ref:l,className:`pl-3 focus:outline-none ${tt}`,contentEditable:!0,dangerouslySetInnerHTML:{__html:e}});return $.createElement("div",{className:`px-2 py-2 h-full cursor-text ${a}`,onClick:o},$.createElement("p",{className:"text-narvik-medium uppercase"},n),r?c:i)};var nt="_container_9lz1v_1";const rt={0:"",1:"Get Specific, Bhavik! Use details to describe what you're feeling grateful for.",2:"Keep these small and achievable so you actually go out and complete them",3:'Write your affirmations and ask, "Do I believe it? Do I feel better?" If so, you\'re on the right track.',4:"What were the highlights from your day? Even if it's a small joy like a good cup of coffee or tea.",5:"Bhavik, if you could magically go back in time and change something, what would it be?"},lt={0:"",1:"3 things i am greateful for...",2:"What i will do to make today great?",3:"Daily affirmations",4:"highlights of the day",5:"How could I have made today even better?"},st=({stage:e,changeStage:t,phase:a,setContent:n,content:r,final:l,progressPercentage:s,onCloseClick:i})=>{const[c,m]=T.exports.useState("<li>Dummy Demo content.</li>"),[d,u]=T.exports.useState(""),[g,p]=T.exports.useState(),f=T.exports.createRef(),h=T.exports.createRef(),x=T.exports.createRef(),b=e=>3===e||5===e;let E=Be({userKeys:["Control","ArrowLeft"]}),y=Be({userKeys:["Control","ArrowRight"]}),v=Be({userKeys:["Escape"]});T.exports.useEffect((()=>{E&&w(!1),y&&w(!0),v&&i()}),[E,y,v]),T.exports.useEffect((()=>{b(e)?u(r[e]?r[e]:""):m(r[e]?r[e]:"<li>&nbsp;</li>")}),[r,e]);const w=(s=!0)=>{if(s&&we(e,a)){const t=o({},r);t[e]=h.current.innerText.toString(),n(t),l(t,g)}else{const a=s?e+1:e-1,l=o({},r);if(b(e)?l[e]=h.current.innerText.toString():l[e]=f.current.innerHTML.toString(),b(a))u(r[a]?r[a]:"");else{const e=r[a]?r[a]:"<li>&nbsp;</li>";f.current&&(f.current.innerHTML=e),m(r[a]?r[a]:"<li>&nbsp;</li>")}n(l),t(a)}};return $.createElement($.Fragment,null,$.createElement(et,{stage:e,changeStage:()=>w(!1),close:i,backButtonDisabled:"evening"===a&&4===e,progressPercentage:s}),$.createElement("div",{className:"rounded-lg bg-white shadow-sm px-3 py-4 mx-2 relative border-none caret"},$.createElement("p",{className:"leading-normal text-lg"},rt[e])),$.createElement("div",{className:`px-3 mt-2 ${nt}`},$.createElement(at,{title:lt[e],paraText:d,listText:c,isList:3!==e&&5!==e,listRef:f,paraRef:h})),$.createElement("div",{className:"absolute bottom-2 w-full px-3 pb-2"},$.createElement("div",{className:"inline-block"},$.createElement("label",{htmlFor:"imgInput",onClick:()=>{var e;return null==(e=x.current)?void 0:e.click()}},$.createElement(Le,{icon:["fas","image"],className:"mr-2",active:!!g,variant:"brown",shadow:"md"})),$.createElement("input",{ref:x,type:"file",id:"imgInput",name:"imgInput",accept:"image/*",capture:"camera",onChange:e=>{e.target.files&&p(e.target.files[0])},className:"hidden"})),$.createElement(Le,{className:"float-right",variant:"brown",shadow:"md",active:we(e,a),onClick:()=>w(!0),icon:["fas",we(e,a)?"check":"arrow-right"]})))},ot=({quote:e,changeStage:t,stage:a,onCloseClick:n,progressPercentage:r})=>{let l=Be({userKeys:["Control","ArrowRight"]}),s=Be({userKeys:["Escape"]});return T.exports.useEffect((()=>{l&&t(1),s&&n()}),[l,s]),$.createElement($.Fragment,null,$.createElement(et,{stage:a,changeStage:t,close:n,progressPercentage:r}),$.createElement("p",{className:"max-w-sm mx-auto text-center mt-40 font-highlights text-lg md:text-2xl leading-7 tracking-wide"},e),$.createElement("div",{className:"absolute bottom-2 w-full px-3 pb-2"},$.createElement(Le,{variant:"brown",shadow:"md",active:!0,className:"float-right",onClick:()=>t(1),icon:["fas","arrow-right"]})))},it=[20,36,52,68,84,100],ct=[22,48,74,100],mt=[0,0,0,0,50,100],dt=()=>{const[e,t]=T.exports.useState({stage:0,phase:"complete"}),[a,n]=T.exports.useState({}),[,r]=R(),l=he((e=>e.journal)),s=fe(),c=(()=>{const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries())})();T.exports.useEffect((()=>{const e={phase:"complete",stage:0};void 0!==c.page&&(e.stage=Number(c.page)),"morning"!==c.phase&&"evening"!==c.phase&&"complete"!==c.phase||(e.phase=c.phase),t(e)}),[c.page,c.phase]),T.exports.useEffect((()=>{c.rid?s(De(c.rid,l.journals,l.fetched)):s((e=>{e(de())}))}),[c.rid]),T.exports.useEffect((()=>{if(l.journal){const e=(e=>{const t={};let a,n;n=Object.keys(xe);for(const r in e)a=n.find((e=>xe[e]===r)),a&&(t[a]=e[r]);return t})(l.journal);n(e)}else n({})}),[l.journal]);const m=t=>{let a=0===t?`/journal?phase=${e.phase}`:`/journal?page=${t}&phase=${e.phase}`;c.rid&&(a+=`&rid=${c.rid}`),c.date&&(a+=`&date=${c.date}`),r(a)},d=()=>{r("/")};return $.createElement("div",{className:"container sm:w-128 relative"},0===e.stage&&"evening"!==e.phase?$.createElement(ot,{quote:"Be better, not bitter.",changeStage:m,progressPercentage:"complete"===e.phase?it[e.stage]:"morning"===e.phase?ct[e.stage]:mt[e.stage],onCloseClick:d,stage:e.stage}):$.createElement(st,{progressPercentage:"complete"===e.phase?it[e.stage]:"morning"===e.phase?ct[e.stage]:mt[e.stage],onCloseClick:d,phase:e.phase,stage:e.stage,final:async(t,a)=>{let n=(new Date).getTime();l.journal&&c.rid?n=Number(l.journal.date):c.date&&(n=Number(c.date));const m=i(o({},(e=>Object.keys(e).reduce(((t,a)=>(xe[a]&&(t[xe[a]]=e[a]),t)),{}))(t)),{date:j(n).format("MM/DD/YYYY"),status:"morning"===e.phase?1:2});c.rid?m.id=c.rid:m.id=O();try{s(((e,t,a,n)=>async r=>{let l,s=e;n&&(s.image=n);try{r(oe());let t=o({},e),a=await Ne.request(Se,t);a.journal&&(s=a.journal)}catch(i){r(ie(i.message))}s.date=""+a,t.find((e=>e.id===s.id))?l=t.map((e=>e.id===s.id?o(o({},e),s):o({},e))):(l=[...t,o({},s)],l=l.sort(((e,t)=>Number(t.date)-Number(e.date)))),Te(l,r),r(me({journal:s}))})(m,l.journals,n,a)),r("/")}catch(d){console.log(d)}},content:a,setContent:n,changeStage:m}))},ut=({journal:e,onClick:t})=>$.createElement("div",{className:"relative cursor-pointer",onClick:()=>t(e)},$.createElement("img",{src:`data:image/png;base64,${e.image}`,alt:"journal image",className:"rounded-xl object-cover object-center h-32 w-full border-2 border-narvik-medium"}),$.createElement("span",{className:"absolute bottom-2 left-2 text-white text-lg md:text-2xl lg:text-3xl font-medium p-2"},j(Number(e.date)).format("D MMM")));const gt=({})=>{var e;const[,t]=R(),a=he((e=>e.journal)),[n,r]=T.exports.useState();let l="";n&&("string"==typeof n.image?l=`data:image/png;base64,${n.image}`:(null==(e=n.image)?void 0:e.name)&&(l=URL.createObjectURL(n.image)));let s=$.createElement($.Fragment,null,$.createElement("img",{src:"/assets/no-data.624b1bc3.png",className:"p-10"}),$.createElement("p",{className:"text-center"},"No images found! ",$.createElement("br",null)," Try adding images to your journals to see them here.")),o=a.formattedJournals.reduce(((e,t)=>(t.image&&e.push($.createElement(ut,{key:t.id,journal:t,onClick:r})),e)),[]);return $.createElement("div",{className:"container p-2 w-2/3"},$.createElement(Le,{icon:["fas","arrow-left"],onClick:()=>{t("/")},shadow:"none",variant:"narvik"}),$.createElement(qe,{title:"Gallary",className:"font-highlights my-3"}),o.length>0?$.createElement("div",{className:"grid grid-cols-3 gap-2"},o):s,$.createElement(Xe,{show:!!n,imageSrc:l,onClose:()=>r(void 0)},$.createElement("div",{className:"flex flex-row justify-between content-center p-2"},$.createElement("span",{className:"text-white font-normal text-2xl"},j(Number(null==n?void 0:n.date)).format("D MMMM")),$.createElement(Ae,{active:!0,onClick:()=>{n&&t(`/view/${n.id}`)}},"Go To Journal"))))};function pt(){return function(e={}){const{immediate:t=!1,onNeedRefresh:a,onOfflineReady:n}=e;let r;"serviceWorker"in navigator&&(r=new c("/sw.js",{scope:"/"}),r.addEventListener("activated",(e=>{e.isUpdate?window.location.reload():null==n||n()})),r.register({immediate:t}).then((e=>e)))}(),$.createElement("div",{className:"flex justify-center items-center bg-brown-light"},$.createElement(I,null,$.createElement(L,{classNames:"fade",timeout:300},$.createElement(K,null,$.createElement(B,{path:"/",component:Ge}),$.createElement(B,{path:"/view/:id",component:Ze}),$.createElement(B,{path:"/journal",component:dt}),$.createElement(B,{path:"/gallary",component:gt})))))}H.autoAddCss=!1,A.add(P,_,q,z,U,Y,F,W,G,Q,V,X,Z,ee,te,ae),ne.render($.createElement($.StrictMode,null,$.createElement(re,{store:ge},$.createElement(le,{loading:null,persistor:pe},$.createElement(pt,null)))),document.getElementById("root"));
